{"mode":"Text","textContent":"def when_started1():\n    # Main Code\n    BigArmLower.set_stopping(HOLD)\n    BigArmUpper.set_stopping(HOLD)\n    SmallArmLower.set_stopping(HOLD)\n    SmallArmUpper.set_stopping(BRAKE)\n    LeftDrive.set_stopping(COAST)\n    RightDrive.set_stopping(COAST)\n    switch = False\n    \n    # loop forever\n    while True:\n        # Add variable speed\n        velocity = 0.75\n        if (controller_1.buttonL1.pressing()):  # top left trigger\n            velocity = 0.5\n        elif (controller_1.buttonR1.pressing()):  # top right\n            velocity = 1.0\n        if (controller_1.buttonR2.pressing()):\n            switch = True\n        elif (controller_1.buttonL2.pressing()):\n            switch = False\n        \n        # Drive\n        LeftVelocity = velocity*(controller_1.axis2.position()+(controller_1.axis1.position()))     # set the leftdrive velocity based on the combination of controller axes\n        RightVelocity = velocity*(controller_1.axis2.position()-(controller_1.axis1.position()))    # set the rightdrive velocity based on combination of controller axes\n        LeftDrive.spin(FORWARD)     # Spin the motors\n        RightDrive.spin(FORWARD)\n        if switch == True:\n            LeftDrive.set_velocity(-LeftVelocity,PERCENT)    # Set their velocities from the calculated ones\n            RightDrive.set_velocity(-RightVelocity,PERCENT)\n        else:\n            LeftDrive.set_velocity(LeftVelocity,PERCENT)    # Set their velocities from the calculated ones\n            RightDrive.set_velocity(RightVelocity,PERCENT)\n        # Small Arm\n        SmallArmLower.spin(FORWARD)\n        SmallArmLower.set_velocity((controller_1.axis3.position()),PERCENT)\n        SmallArmUpper.spin(FORWARD)\n        SmallArmUpper.set_velocity((controller_1.axis4.position())/4,PERCENT)\n\n        # Big Arm\n        if controller_1.buttonDown.pressing():\n            BigArmLower.spin(FORWARD)\n            pass\n        elif controller_1.buttonUp.pressing():\n            BigArmLower.spin(REVERSE)\n            pass\n        else:\n            BigArmLower.stop()\n            pass\n        if controller_1.buttonRight.pressing():\n            BigArmUpper.spin(FORWARD)\n            pass\n        elif controller_1.buttonLeft.pressing():\n            BigArmUpper.spin(REVERSE)\n            pass\n        else:\n            BigArmUpper.stop()\n            pass\n\n        if controller_1.buttonA.pressing():\n            center_goal(vision_20__YELLOW_GOAL)\n        elif controller_1.buttonB.pressing():\n            center_goal(vision_20__BLUE_GOAL)\n        elif controller_1.buttonY.pressing():\n            center_goal(vision_20__RED_GOAL)\n        wait(5, MSEC)\n\ndef center_goal(object):\n    RightDrive.set_stopping(BRAKE)\n    LeftDrive.set_stopping(BRAKE)\n    centered = False\n    adjustment_speed = 0.1\n    while(not centered):\n        if (controller_1.buttonX.pressing()):\n            break;\n        vision_objects = vision_20.take_snapshot(object)\n        if (vision_objects):\n            centerx = vision_20.largest_object().centerX\n            if (abs(centerx-158)>50):\n                adjustment_speed = 0.3\n                RightDrive.set_velocity(-adjustment_speed*(centerx-158)/1.58, PERCENT)\n                LeftDrive.set_velocity(adjustment_speed*(centerx-158)/1.58, PERCENT)\n            elif (abs(centerx-158)>25):\n                adjustment_speed = 0.2\n                RightDrive.set_velocity(-adjustment_speed*(centerx-158)/1.58, PERCENT)\n                LeftDrive.set_velocity(adjustment_speed*(centerx-158)/1.58, PERCENT)\n            elif (abs(centerx-158)<25):\n                adjustment_speed = 0.1\n                RightDrive.set_velocity(-adjustment_speed*(centerx-158)/1.58, PERCENT)\n                LeftDrive.set_velocity(adjustment_speed*(centerx-158)/1.58, PERCENT)\n            RightDrive.spin(FORWARD)\n            LeftDrive.spin(FORWARD)\n            if (centerx < 160 and centerx > 156):\n                centered = True\n                controller_1.rumble(\"...\")\n        wait(0.05, MSEC)\n# run the code\nwhen_started1()","textLanguage":"python","rconfig":[{"port":[3,13],"name":"BigArmLower","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","gear":"ratio36_1","motor_a_reversed":"false","motor_b_reversed":"true"},"triportSourcePort":22},{"port":[4,14],"name":"BigArmUpper","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","gear":"ratio36_1","motor_a_reversed":"true","motor_b_reversed":"false"},"triportSourcePort":22},{"port":[5,15],"name":"SmallArmLower","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","gear":"ratio36_1","motor_a_reversed":"false","motor_b_reversed":"true"},"triportSourcePort":22},{"port":[6,16],"name":"SmallArmUpper","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","gear":"ratio36_1","motor_a_reversed":"false","motor_b_reversed":"true"},"triportSourcePort":22},{"port":[],"name":"controller_1","customName":false,"deviceType":"Controller","deviceClass":"controller","setting":{"left":"","leftDir":"false","right":"","rightDir":"false","upDown":"","upDownDir":"false","xB":"","xBDir":"false","drive":"none","id":"primary"},"triportSourcePort":22},{"port":[20],"name":"vision_20","customName":false,"deviceType":"Vision","deviceClass":"vision","setting":{"config":"{\"config\":{\"brightness\":50,\"signatures\":[{\"name\":\"YELLOW_GOAL\",\"parameters\":{\"uMin\":47,\"uMax\":2501,\"uMean\":1274,\"vMin\":-3381,\"vMax\":-3063,\"vMean\":-3222,\"rgb\":1,\"type\":0,\"name\":\"YELLOW_GOAL\"},\"range\":3},{\"name\":\"RED_GOAL\",\"parameters\":{\"uMin\":4571,\"uMax\":8739,\"uMean\":6654,\"vMin\":-737,\"vMax\":-69,\"vMean\":-404,\"rgb\":1,\"type\":0,\"name\":\"RED_GOAL\"},\"range\":2.5},{\"name\":\"BLUE_GOAL\",\"parameters\":{\"uMin\":-2327,\"uMax\":-1637,\"uMean\":-1982,\"vMin\":8519,\"vMax\":11565,\"vMean\":10042,\"rgb\":1,\"type\":0,\"name\":\"BLUE_GOAL\"},\"range\":2.5},{\"name\":\"SIG_4\",\"parameters\":{\"uMin\":0,\"uMax\":0,\"uMean\":0,\"vMin\":0,\"vMax\":0,\"vMean\":0,\"rgb\":0,\"type\":0,\"name\":\"SIG_4\"},\"range\":2.5},{\"name\":\"SIG_5\",\"parameters\":{\"uMin\":0,\"uMax\":0,\"uMean\":0,\"vMin\":0,\"vMax\":0,\"vMean\":0,\"rgb\":0,\"type\":0,\"name\":\"SIG_5\"},\"range\":2.5},{\"name\":\"SIG_6\",\"parameters\":{\"uMin\":0,\"uMax\":0,\"uMean\":0,\"vMin\":0,\"vMax\":0,\"vMean\":0,\"rgb\":0,\"type\":0,\"name\":\"SIG_6\"},\"range\":2.5},{\"name\":\"SIG_7\",\"parameters\":{\"uMin\":0,\"uMax\":0,\"uMean\":0,\"vMin\":0,\"vMax\":0,\"vMean\":0,\"rgb\":0,\"type\":0,\"name\":\"SIG_7\"},\"range\":2.5}],\"codes\":[]}}","isConfigured":"false"},"triportSourcePort":22},{"port":[1,2],"name":"LeftDrive","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","gear":"ratio18_1","motor_a_reversed":"false","motor_b_reversed":"false","id":"partner"},"triportSourcePort":22},{"port":[11,12],"name":"RightDrive","customName":true,"deviceType":"MotorGroup","deviceClass":"motor_group","setting":{"fwd":"forward","rev":"reverse","gear":"ratio18_1","motor_a_reversed":"true","motor_b_reversed":"true"},"triportSourcePort":22}],"slot":0,"platform":"V5","sdkVersion":"20210708.10.00.00","appVersion":"2.2.0","fileFormat":"1.0.1","icon":"","targetBrainGen":"First","target":"Physical"}